<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="dgplayer/player.css">
    <!--[if IE 9]>
    <script src="dgplayer/resources/classlist.js"></script>
    <![endif]-->
    <title>ofmlabs codecs</title>
</head>
<body>
    <header>
        <img src="resources/logo.png">
        <h1><a href="http://ofmlabs.org">ofmlabs</a> codecs</h1>
        <h2>A suite of JavaScript audio codecs</h2>
    </header>
    
    <p class="description">
        JavaScript is becoming more and more powerful.  From 
        <a href="https://github.com/mbebenita/Broadway">H.264 decoding</a> to 
        <a href="https://github.com/mozilla/pdf.js">PDF rendering</a>, JS is 
        taking over the world.  At <a href="http://ofmlabs.org/">ofmlabs</a> 
        we are invested in web audio, and with <a href="https://github.com/nddrylliog/jsmad">JSMad</a> 
        showed that decoding audio purely in JS is possible.  And now we've done it again.  
        Introducing <a href="https://github.com/ofmlabs/alac.js">alac.js</a>, a port of the 
        recently open sourced <a href="http://alac.macosforge.org/">Apple Lossless</a> decoder to JavaScript.  
        Now it is possible to play MP3 and Apple Lossless even in browsers without native support.  
        Check out the side-by-side demos below to hear JavaScript rocking out!
    </p>
    
    <section>
        <h3><a href="https://github.com/nddrylliog/jsmad">JSMad</a> &ndash; MP3 in JS</h3>
        <div class="player" id="jsmad" tabindex="0">
            <div class="avatar">
                <img src="dgplayer/resources/fallback_album_art.png">
            </div>
        
            <p>Planets (DJ Apt One Remix)</p>
            <span>fONKSQUISh</span>
        
            <div class="button"></div>
        
            <div class="volume">
                <img src="dgplayer/resources/volume_high.png">
                <div class="track">
                    <div class="progress" style="height: 27px; "></div>
                    <div class="handle" style="-webkit-transform: translate3d(0px, -19px, 0px); "></div>
                </div>
                <img src="dgplayer/resources/volume_low.png">
            </div>
        
            <div class="seek">
                <span>0:00</span>
                <div class="track">
                    <div class="loaded" style="width: 0"></div>
                    <div class="progress" style="width: 0; "></div>
                </div>
                <span>-0:00</span>
            </div>

            <canvas class="visualization"></canvas>
        </div>
        <p class="description">
            JSMad was the first proof that JS audio decoding
            is possible and is a port of <a href="http://www.underbit.com/products/mad/">
            libmad</a>, a C based MPEG audio decoder.  MP3 is probably the most
            common audio format out there.  It is designed
            for small file sizes but compromises on quality.
        </p>
    </section>
    
    <section>
        <h3><a href="https://github.com/ofmlabs/alac.js">ALAC.js</a> &ndash; Apple Lossless in JS</h3>
        <div class="player" tabindex="0">
            <div class="avatar">
                <img src="dgplayer/resources/fallback_album_art.png">
            </div>
        
            <p>Title</p>
            <span>Artist</span>
        
            <div class="button"></div>
        
            <div class="volume">
                <img src="dgplayer/resources/volume_high.png">
                <div class="track">
                    <div class="progress"></div>
                    <div class="handle"></div>
                </div>
                <img src="dgplayer/resources/volume_low.png">
            </div>
        
            <div class="seek">
                <span>0:00</span>
                <div class="track">
                    <div class="loaded"></div>
                    <div class="progress"></div>
                </div>
                <span>-0:00</span>
            </div>
            
            <canvas class="visualization"></canvas>
        </div>
        <p class="description">
            ALAC.js is a port of the recently open sourced 
            <a href="http://alac.macosforge.org/">original Apple Lossless</a> 
            decoder to JavaScript. As its name implies, ALAC is a lossless format
            designed to reduce file size without compromizing
            quality.  Can you tell the difference?
        </p>
    </section>
    
    <footer>&copy; 2011 <a href="http://ofmlabs.org/">ofmlabs</a>.  All rights reserved.</footer>
    
    <script src="dgplayer/player.js"></script>
    <script src="js/ui/madplayer.js"></script>
    <script src="js/ui/visualizer.js"></script>
    <script src="js/audiolib.js/lib/audiolib.js"></script>
                 
    <script src="js/jsmad/src/mad.js"></script>
    <script src="js/jsmad/src/rq_table.js"></script>
    <script src="js/jsmad/src/imdct_s.js"></script>
    <script src="js/jsmad/src/huffman.js"></script>
    <script src="js/jsmad/src/bit.js"></script>
    <script src="js/jsmad/src/stream.js"></script>
    <script src="js/jsmad/src/layer3.js"></script>
    <script src="js/jsmad/src/frame.js"></script>
    <script src="js/jsmad/src/synth.js"></script>
                 
    <script src="js/jsmad/src/arraybuffer/bytestream.js"></script>
    <script src="js/jsmad/src/arraybuffer/filestream.js"></script>
    <script src="js/jsmad/src/arraybuffer/substream.js"></script>
    <script src="js/jsmad/src/arraybuffer/arraystream.js"></script>
    <script src="js/jsmad/src/arraybuffer/ajaxstream.js"></script>
                 
    <script src="js/jsmad/src/binarystring/bytestream.js"></script>
    <script src="js/jsmad/src/binarystring/filestream.js"></script>
    <script src="js/jsmad/src/binarystring/substream.js"></script>
    <script src="js/jsmad/src/binarystring/stringstream.js"></script>
    <script src="js/jsmad/src/binarystring/ajaxstream.js"></script>
                 
    <script src="js/jsmad/src/id3v22stream.js"></script>
    <script src="js/jsmad/src/id3v23stream.js"></script>
    <script src="js/jsmad/src/mp3file.js"></script>
                 
    <script src="js/jsmad/src/player.js"></script>

    <script>        
// UA sniffing... *sniff* TODO: remove this after nobody uses that browser anymore, or if feature detection is found.
Sink.doInterval.backgroundWork = !/firefox\/8.0/i.test(navigator.userAgent);

var madPlayer;

DGPlayer.on('play', function play(){
    madPlayer = createMadPlayer('media/fonksquish/planets.mp3');
 
    madPlayer.onready = function() {
        DGPlayer.songTitle = "Planets (DJ Apt One Remix)";
        DGPlayer.songArtist = "fONKSQUISh";
        DGPlayer.coverArt = "dgplayer/resources/fallback_album_art.png"
        madPlayer.player.setPlaying(true);
    };

    DGPlayer.off('play', play);
    DGPlayer.state = 'playing';
});
    </script>

</body></html>
